<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css">
<link rel="stylesheet" href="css/style.css">

<!------------------Light Box for Gallery-------------->
<link rel="stylesheet" href="css/lightbox.min.css">
<script type="text/javascript" src="lightbox-plus-jquery.min.js"></script>
<!------------------Light Box for Gallery-------------->
<title>Application-1</title>
</head>
<body>

<header>
    <!-------------------------------Navigation Starts------------------>

    <nav class="navbar navbar-expand-md navbar-dark mb-4" style="background-color:#ED1D24">
        <a href="index.html" class="navbar-brand">ANIMAL FARM</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#responsive">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="responsive">
            <ul class="navbar-nav mr-auto text-capitalize">
                <li class="nav-item"><a href="index.html" class="nav-link active">Home</a></li>
                <li class="nav-item"><a href="pet-sitting.html" class="nav-link">Pet Sitting</a></li>
                <li class="nav-item"><a href="profile.html" class="nav-link">Profile</a></li>
                <li class="nav-item"><a href="#modalview" class="nav-link" data-toggle="modal">Messages</a></li>
                <li class="nav-item"><a href="notification.html" class="nav-link">Docs</a></li>
                <li class="nav-item"><a href="#" class="nav-link d-md-none">Growl</a></li>
                <li class="nav-item"><a href="#" class="nav-link d-md-none">Logout</a></li>
            </ul>

            <form action="" class="form-inline ml-auto d-none d-md-block">
                <input type="text" name="search" id="search" placeholder="Search" class="form-control form-control-sm">
            </form>
            <a href="notification.html" class="text-decoration-none" style="color:#CBE4F2;font-size:22px;">
                <i class="far fa-bell ml-3 d-none d-md-block"></i>
            </a> 
            <img src="img/sarah-lee.jpg" alt="User Avatar" class="rounded-circle ml-3 d-none d-md-block" width="32" height="32">
        </div>
    </nav>

    <!---------------------------------------------Ends navigation------------------------------>
</header>

<main>
    <!---------------------------Modal Section starts------------------->
    <div class="modal fade" id="modalview" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title h4" id="modalLabel">Messages</div>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <ul class="list-unstyled">
                        <li class="media hover-media">
                            <a href="#" class="text-decoration-none">
                                <img src="img/sarah-lee.jpg" alt="User Avatar" width="60" height="60" class="rounded-circle mr-3">
                                <div class="media-body text-dark">
                                    <h6 class="media-header">Sarah Lee and <strong>1 others</strong></h6>
                                    <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                                </div>
                            </a>
                            <hr class="my-3">
                        </li>
                        <li class="media hover-media">
                            <a href="#" class="text-decoration-none">
                                <img src="img/jim-bancroft.jpg" alt="User Avatar" width="60" height="60" class="rounded-circle mr-3">
                                <div class="media-body text-dark">
                                    <h6 class="media-header">Jim and <strong>3 others</strong></h6>
                                    <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                                </div>
                            </a>
                            <hr class="my-3">
                        </li>
                        <li class="media hover-media">
                            <a href="#" class="text-decoration-none">
                                <img src="img/preston-mann.jpg" alt="User Avatar" width="60" height="60" class="rounded-circle mr-3">
                                <div class="media-body text-dark">
                                    <h6 class="media-header">Preston and <strong>5 others</strong></h6>
                                    <p class="media-text">Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                                </div>
                            </a>
                            <hr class="my-3">
                        </li>
                        <!-- Repeat similar structure for other messages -->
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-------------------------------Modal Ends---------------------------->

    <!-------------------------------------------Grid layout for large screens (lg-xl-3 columns) and small screens (xs-lg 1 column)--------------------------------->
    <div class="container">
        <div class="row">
            <!--------------------------Left column start-->
            
            <div class="col-12 col-lg-3">

                <div class="left-column">
                    <div class="card profile-card" id="index-left">
                        <img src="img/wendy-upside-down.jpg" alt="Cover Photo" class="card-img-top img-fluid">
                        <div class="card-body text-center">
                            <img src="img/sarah-lee.jpg" alt="Profile Picture" width="120" height="120" class="rounded-circle mt-n5">
                            <h5 class="card-title mt-4">Sarah Lee</h5>
                            <p class="card-text text-justify mb-2">:3</p>
                            <ul class="list-unstyled nav justify-content-center">
                              <a href="#" class="text-dark text-decoration-none"> <li class="nav-item">Friends <br> <strong>12M </strong></li></a>
                              <a href="#" class="text-dark text-decoration-none"> <li class="nav-item">Enemies <br> <strong>1</strong></li></a> 
                            </ul>

                        </div>




                    </div>


                    <div class="card shadow-sm card-left2 mb-4">

                        <div class="card-body">

                                <h5 class="mb-3 card-title">About <small><a href="#" class="ml-1">Edit</a></small></h5>

                                <p class="card-text"> <i class="fas fa-calendar-week mr-2"></i> Went to <a href="#" class="text-decoration-none">oh canada</a></p>

                                <p class="card-text"> <i class="fas fa-user-friends mr-2"></i> Become a friend with <a href="#" class="text-decoration-none">obama</a></p>
                                <p class="card-text"> <i class="far fa-building mr-2"></i> Work at <a href="#" class="text-decoration-none">Github</a></p>
                                <p class="card-text"> <i class="fas fa-home mr-2"></i> Live in <a href="#" class="text-decoration-none">San francisco</a></p>
                                <p class="card-text"> <i class="fas fa-map-marker mr-2"></i> From <a href="#" class="text-decoration-none">Seattle, WA</a></p>




                        </div>
                     




                    </div>




                    <div class="card shadow-sm card-left3 mb-4">

                        <div class="card-body" id = "images-left">
                            <h5 class="card-title">Photos<small class="ml-2"><a href="#">Edit </a></small></h5>

                            <div class="row">
                                <div class="col-6 p-1">
                                    <a href="img/left1.jpg" data-lightbox="id" ><img src="img/left1.jpg" alt="img" class="img-fluid my-2"></a>  
                                    <a href="img/left2.jpg"data-lightbox="id"><img src="img/left2.jpg" alt="img" class="img-fluid my-2"></a>
                                    <a href="img/left3.jpg"data-lightbox="id"><img src="img/left3.jpg" alt="img" class="img-fluid my-2"></a>

                                </div>


                                <div class="col-6 p-1">
                                        <a href="img/left4.jpg"data-lightbox="id"><img src="img/left4.jpg" alt="img" class="img-fluid my-2"></a>
                                        <a href="img/left5.jpg"data-lightbox="id"><img src="img/left5.jpg" alt="img" class="img-fluid my-2"></a>
                                        <a href="img/left6.jpg"data-lightbox="id"><img src="img/left6.jpg" alt="img" class="img-fluid my-2"></a>
    
                                    </div>

                            </div>

                        </div>







                        </div>




                   

                    





                </div>





            </div>

            <!-------------------------------------------Ends left column---------------------->

            <!-----------------------Middle Column Starts-->
            <div class="col-12 col-lg-6">
                <div class="middle-column">
                    <div class="card shadow-sm card-middle1 mb-4">
                        <div class="card-body">
                            <ul class="nav">
                                <li class="nav-item"><a href="#" class="nav-link">All</a></li>
                                <li class="nav-item"><a href="#" class="nav-link">Posts</a></li>
                                <li class="nav-item"><a href="#" class="nav-link">Photos</a></li>
                                <li class="nav-item"><a href="#" class="nav-link">Videos</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="card-box">
                        <div class = "card-first">
                            <div class="card shadow-sm card-middle2 mb-4">
                                <div class="card-body">
                                    <div class="media">
                                        <img src="img/sarah-lee.jpg" alt="User Avatar" width="50" height="50" class="rounded-circle mr-3">
                                        <div class="media-body">
                                            <div class="form-group">
                                                <label class="sr-only" for="post_text">post_text</label>
                                                <textarea name="post_text" id="post_text" rows="3" class="form-control" placeholder="What's on your mind?" style="resize: none;"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <ul class="nav">
                                        <li class="nav-item">
                                            <a href="#" class="nav-link" id = "photoLink">
                                                <i class="fas fa-camera text-muted"></i> <span class="d-none d-lg-inline">Photo</span>
                                                <input type="file" id="uploadInput" accept="image/*" style="display: none;">
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a href="#" class="nav-link" id = "videoLink">
                                                <i class="fas fa-video text-muted"></i> <span class="d-none d-lg-inline">Video</span>
                                                <input type="file" id="uploadVideoInput" accept="video/*" style="display: none;">
                                            </a>
                                        </li>
                                        <button type="button" class = "btn btn-primary btn-sm" onclick="addCardBody()">Add Post</button>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- POSTS GO HERE -->

                        <!-- 1st hard coded post -->
                        <div class="card shadow-sm card-middle3 mb-4">
                            <div class="card-body">
                                <div class="flex-container">
                                    <div class="post-header">
                                        <img src="img/sarah-lee.jpg" alt="User Avatar"  class="rounded-circle mr-3">
                                        <h5 class="media-header">Sarah Lee <small class="text-muted">2m ago</small></h5>
                                    </div>
                                    <div class="post-body">
                                    <!-- Post Image -->
                                        <img src="img/vader-aaaaa.jpg" alt="Post Image" class="mr-3" width="90%" height="auto" style="padding: 10px 0;">

                                    <!-- Post Text -->
                                        <p>This is my cat. He is very handsome as you can see.</p>
                                    </div>
                                    <!-- Post Actions -->
                                    <div class="post-actions">
                                        <a href="#" class="like" data-label="like-button"></a>
                                        <a href="#" class="reply"></a>
                                    </div>
                                    <!-- Comments -->
                                    <form action="" class="form-inline" style="padding-top: 10px;">
                                        <input type="text" class="form-control form-control-sm w-75 mr-3" placeholder="Add a comment">
                                        <button type="button" class="btn btn-primary btn-sm">Post</button>
                                    </form>
                                    <div class="post-comment">
                                        <div class="comment-body">
                                            <img src="img/sarah-lee.jpg" alt="User Avatar">
                                            <div class="comment-content">
                                                <h6>Sarah Lee</h6>
                                                <p>Aww! What's their name?</p>
                                                <div class="comment-actions">
                                                    <a href="#" class="like" data-label="comment-like-button"></a>
                                                    <span>2m ago</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="comment-body">
                                            <img src="img/sarah-lee.jpg" alt="User Avatar">
                                            <div class="comment-content">
                                                <h6>Sarah Lee</h6>
                                                <p>Love this!</p>
                                                <div class="comment-actions">
                                                    <a href="#" class="like" data-label="comment-like-button"></a>
                                                    <span>2m ago</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>                     

                    </div>
                    <!-- Repeat similar structure for other posts -->
                </div>
            </div>
            <!--------------------------------Middle column ends------------------------->

            <!------------------------Right column starts-->
            <div class="col-12 col-lg-3">

                <div class="right-column">
            
                    <div class="card shadow-sm mb-4" >
                        <div class="card-body">
                            <h6 class="card-title">Popular</h6>
                            <img src="img/chip-sniff.jpg" alt="card-img" class="card-img mb-3">
                            <p class="card-text text-justify"> <span class="h6">It might be time to visit Iceland.</span> Iceland is so chill, and everything looks cool here. Also, we heard the people are pretty nice.  What are you waiting for?</p>            
            
                        </div>
            
                    </div>
            
            
                    <div class="card shadow-sm mb-4">
            
                        <div class="card-body">
                            <h6 class="card-title ">Likes <a href="#" class="ml-1"><small>.View All</small> </a> </h6>
                            <div class="row no-gutters d-none d-lg-flex">
                                <div class="col-6 p-1">
                                        <img src="img/jen-stevens.jpg" alt="img" width="80px" height="80px" class="rounded-circle mb-4">
                                        <img src="img/preston-mann.jpg" alt="img" width="80px" height="80px" class="rounded-circle">
                                </div>
                                <div class="col-6 p-1 text-left">
                                    <h6>Jen Stevens</h6>
                                    <a href="#" class="btn btn-outline-info btn-sm mb-3"><i class="fas fa-user-friends"></i>Follow </a>
    
                                    <h6>Preston Mann</h6>
                                    <a href="#" class="btn btn-outline-info  btn-sm"><i class="fas fa-user-friends"></i>Follow </a>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <p class="lead" style="font-size:18px;">Dave really likes these nerds, no one knows why though.</p>
                        </div>
                    </div>
                    <div class="card shadow-sm card-right1 mb-4">
                        <div class="card-body">
                            <h5 class="card-title">Trending</h5>
                            <ul class="list-unstyled">
                                <li class="media hover-media">
                                    <a href="#" class="text-decoration-none">
                                        <img src="img/sarah-lee.jpg" alt="User Avatar" width="50" height="50" class="rounded-circle mr-3">
                                        <div class="media-body">
                                            <h6 class="media-header">Sarah Lee</h6>
                                            <p class="media-text">Hi!</p>
                                        </div>
                                    </a>
                                    <hr class="my-3">
                                </li>
                                <li class="media hover-media">
                                    <a href="#" class="text-decoration-none">
                                        <img src="img/jim-bancroft.jpg" alt="User Avatar" width="50" height="50" class="rounded-circle mr-3">
                                        <div class="media-body">
                                            <h6 class="media-header">Jim Bancroft</h6>
                                            <p class="media-text">Hello.</p>
                                        </div>
                                    </a>
                                    <hr class="my-3">
                                </li>
                                <li class="media hover-media">
                                    <a href="#" class="text-decoration-none">
                                        <img src="img/preston-mann.jpg" alt="User Avatar" width="50" height="50" class="rounded-circle mr-3">
                                        <div class="media-body">
                                            <h6 class="media-header">Preston Mann</h6>
                                            <p class="media-text">Hey!</p>
                                        </div>
                                    </a>
                                    <hr class="my-3">
                                </li>
                                <button type="button" class = "btn btn-primary btn-sm" onclick="addCardBody()">Add Post</button>
                                <!-- Repeat similar structure for other trending topics -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-------------------------------Ends right column--------------------------->
        </div>
    </div>
</main>

<footer>
    <div class="container text-center py-3">
        <p>&copy; 2024 Application-1. All Rights Reserved.</p>
    </div>
</footer>

<script>
// Get references to the elements
var photoLink = document.getElementById('photoLink');
var videoLink = document.getElementById('videoLink')
var uploadInput = document.getElementById('uploadInput');
var videoInput = document.getElementById('uploadVideoInput');
var uploadedImage = document.getElementById('uploadedImage');
var imagepath;

// Add click event listener to the photo span
videoLink.addEventListener('click', function(event) {
    // Trigger a click event on the upload input
    videoInput.click();
});

// Add click event listener to the photo span
photoLink.addEventListener('click', function(event) {
    // Trigger a click event on the upload input
    uploadInput.click();
});

// Add event listener to input element
uploadInput.addEventListener('change', function(event) {
    // Get the selected file
    var file = event.target.files[0];
    
    // Create a FileReader object
    var reader = new FileReader();

    // Set up event listener to handle file reading
    reader.onload = function(event) {
        // Set the source of the image tag to the uploaded image data
        // uploadedImage.src = event.target.result;
        imagepath = event.target.result;
        console.log("image", imagepath);
    };

    // Read the selected file as a Data URL
    reader.readAsDataURL(file);
});

function addCardBody() {
    console.log("addCardBody");
    var cardBox = document.querySelector('.card-box');
    var cardFirst = cardBox.querySelector('.card-first');

    if (!cardFirst) {
        console.error("Card header not found.");
        return;
    }

    // Username
    var userName = 'Sarah Lee'
    //Text
    var postText = document.getElementById('post_text').value;
    postText = postText.replace(/\n/g, '<br>');
    //Video
    const file = videoInput.files[0];

    // Create a new card body
    var newCardBody = document.createElement('div');
    newCardBody.classList.add('new-card');

    // Customize the content of the new card body here
    newCardBody.innerHTML = 
    `
        <div class="card shadow-sm card-middle3 mb-4">
            <div class="card-body">
                <div class="flex-container">
                    <div class="post-header">
                        <img src="img/sarah-lee.jpg" alt="User Avatar"  class="rounded-circle mr-3">
                        <h5 class="media-header">${userName}<small class="text-muted"> 2m ago</small></h5>
                    </div>
                    <div class="post-body">
                        <!-- Post Image -->
                        ${imagepath ? `<div class="media">
                            <img src="${imagepath}" alt="Post Image" class="mr-3" width="90%" height="auto" style="padding-bottom: 15px;">
                        </div>` : ''}
                        
                        <!-- Post Video -->
                        ${file ? `<div class="media">
                            <video id="videoPlayer" style="width: 50%;" controls autoplay loop muted>
                                Your browser does not support the video tag.
                            </video>
                        </div>` : ''}
                        <!-- Post Text -->
                        <p>${postText}</p>
                    </div>
                    <!-- Post Actions -->
                    <div class="post-actions">
                        <a href="#" class="like" data-label="like-button"></a>
                        <a href="#" class="reply"></a>
                    </div>
                    <!-- Comments -->
                    <form action="" class="form-inline" style="padding-top: 10px;">
                        <input type="text" class="form-control form-control-sm w-75 mr-3" placeholder="Add a comment">
                        <button type="button" class="btn btn-primary btn-sm">Post</button>
                    </form>
                    <div class="post-comment">
                    </div>
                </div>

            </div>
        </div>
    `;
    
    // Insert the new card body after the card first element
    cardFirst.insertAdjacentElement('afterend', newCardBody);

    const videoPlayer = document.getElementById('videoPlayer');
    if (file) {
        const url = URL.createObjectURL(file);
        videoPlayer.src = url;
        videoPlayer.play();

        // Add event listener for video errors
        videoPlayer.addEventListener('error', function(e) {
            console.error('Error loading video:', e);
            alert('Error loading video. Please ensure the file is a valid video format.');
        });

        videoPlayer.play().catch(error => {
            console.error('Error playing video:', error);
            alert('Error playing video. Please ensure the file is a valid video format.');
        });
    } 

    // Clear the input values
    uploadInput.value = '';
    videoInput.value = '';
    imagepath = '';
    document.getElementById('post_text').value = '';
    addCommentFunctionality();
    addLikeButtonListeners('like-button');

    // Add event listeners to comment like buttons
    addLikeButtonListeners('comment-like-button');
}

function addCommentFunctionality() {
    // Get all comment forms
    var commentForms = document.querySelectorAll('.form-inline');

    // Iterate over each comment form
    commentForms.forEach(function(form) {
        // Check if the event listener has already been attached
        if (!form.dataset.commentListener) {
            // Add a custom attribute to mark that the event listener has been attached
            form.dataset.commentListener = true;

            // Attach click event listener
            form.addEventListener('click', function(event) {
                event.preventDefault(); // Prevent default form submission

                // Find the associated comments container
                var commentsContainer = this.nextElementSibling;

                // Find the input field within the form
                var commentInput = this.querySelector('.form-control');

                // Get the comment text
                var commentText = commentInput.value.trim();

                if (commentText === '') {
                    return; // Do nothing if the input is empty
                }

                // Create a new comment element
                var newComment = document.createElement('div');
                newComment.classList.add('comment-body');
                newComment.innerHTML = `
                    <img src="img/sarah-lee.jpg" alt="User Avatar">
                    <div class="comment-content">
                        <h6>Sarah Lee</h6>
                        <p>${commentText}</p>
                        <div class="comment-actions">
                            <a href="#" class="like" data-label="comment-like-button"></a>
                            <span>Just now</span>
                        </div>
                    </div>
                `;

                // Append the new comment to the comments container at the beginning
                commentsContainer.insertBefore(newComment, commentsContainer.firstChild);


                // Clear the comment input field
                commentInput.value = '';
                addLikeButtonListeners('comment-like-button');
            });
        }
    });
}

// Call the function to attach the comment functionality
addCommentFunctionality();


</script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="lightbox-plus-jquery.min.js"></script>

<script>

// Function to add event listeners to elements with a specific data-label
function addLikeButtonListeners(dataLabel) {
    var likeButtons = document.querySelectorAll(`[data-label="${dataLabel}"]`);
    likeButtons.forEach(function (button) {
        // Check if the event listener has already been added
        if (!button.dataset.listenerAdded) {
            button.addEventListener('click', function (e) {
                e.preventDefault();
                this.classList.toggle('liked');
            });
            // Mark that the event listener has been added
            button.dataset.listenerAdded = true;
        }
    });
}
document.addEventListener('DOMContentLoaded', function () {

    // Add event listeners to post like buttons
    addLikeButtonListeners('like-button');

    // Add event listeners to comment like buttons
    addLikeButtonListeners('comment-like-button');
});

</script>


</body>
</html>
